# 集群管理服务器配置
server:
  host: "0.0.0.0"
  port: "9091"
  environment: "development"

# 集群基础配置
cluster:
  cluster_id: "jobfirst-cluster-1"
  manager_id: "cluster-manager-1"
  
  # 负载均衡配置
  load_balance:
    strategy: "round_robin"  # round_robin, least_connections, weighted_round_robin, ip_hash
    health_check_interval: 10s
    failure_threshold: 3
    recovery_timeout: 60s
  
  # 故障转移配置
  failover:
    enabled: true
    auto_failover: true
    failover_timeout: 30s
    recovery_check_interval: 10s
  
  # 数据同步配置
  sync:
    enabled: true
    sync_interval: 5s
    batch_size: 100
    retry_attempts: 3
    retry_delay: 1s

# Redis配置 (用于集群状态存储)
redis:
  host: "localhost"
  port: "6379"
  password: ""
  db: 1  # 使用不同的数据库
  pool_size: 10
  min_idle_conns: 5
  max_retries: 3
  dial_timeout: 5s
  read_timeout: 3s
  write_timeout: 3s

# 日志配置
logging:
  level: "info"
  format: "json"
  output: "stdout"
  file: "./logs/cluster-manager.log"
  max_size: 100
  max_age: 30
  max_backups: 5

# 集群节点配置
nodes:
  - node_id: "basic-server-node-1"
    host: "localhost"
    port: 8080
    weight: 100
    status: "active"
    metadata:
      service: "basic-server"
      version: "1.0.0"
      mode: "cluster"
      instance: "node-1"
  
  - node_id: "basic-server-node-2"
    host: "localhost"
    port: 8180
    weight: 100
    status: "active"
    metadata:
      service: "basic-server"
      version: "1.0.0"
      mode: "cluster"
      instance: "node-2"
  
  - node_id: "basic-server-node-3"
    host: "localhost"
    port: 8280
    weight: 100
    status: "active"
    metadata:
      service: "basic-server"
      version: "1.0.0"
      mode: "cluster"
      instance: "node-3"

# 监控配置
monitoring:
  enabled: true
  metrics_port: "9092"
  health_check_interval: 30s
  prometheus_enabled: true
  
  # 性能指标
  metrics:
    request_count: true
    response_time: true
    error_rate: true
    cpu_usage: true
    memory_usage: true
    disk_usage: true

# 安全配置
security:
  api_key_required: false
  rate_limit: 1000
  rate_limit_window: 1m
  cors_origins: ["*"]
  cors_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  cors_headers: ["Origin", "Content-Type", "Accept", "Authorization", "API-Version", "X-Requested-With", "X-API-Key", "X-Client-Version"]

# 数据库健康检查配置
# 用于验证容器化数据库集群的连接状态

# 数据库健康检查端点
server {
    listen 8090;
    server_name localhost;
    
    # 日志
    access_log /var/log/nginx/database_health_access.log;
    error_log /var/log/nginx/database_health_error.log;
    
    # MySQL健康检查
    location /health/mysql {
        access_log off;
        # 这里可以添加MySQL连接检查逻辑
        return 200 'MySQL: OK\n';
        add_header Content-Type text/plain;
    }
    
    # PostgreSQL健康检查
    location /health/postgres {
        access_log off;
        # 这里可以添加PostgreSQL连接检查逻辑
        return 200 'PostgreSQL: OK\n';
        add_header Content-Type text/plain;
    }
    
    # MongoDB健康检查
    location /health/mongodb {
        access_log off;
        # 这里可以添加MongoDB连接检查逻辑
        return 200 'MongoDB: OK\n';
        add_header Content-Type text/plain;
    }
    
    # Redis健康检查
    location /health/redis {
        access_log off;
        # 这里可以添加Redis连接检查逻辑
        return 200 'Redis: OK\n';
        add_header Content-Type text/plain;
    }
    
    # 综合健康检查
    location /health/databases {
        access_log off;
        return 200 'Database Cluster: OK\n';
        add_header Content-Type text/plain;
    }
}
